\documentclass[10pt]{ujarticle}
\usepackage[top=30truemm, bottom=30truemm, left=25truemm, right=25truemm]{geome\
try}
\usepackage{listings}
\usepackage{ascmac}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{bm}
\usepackage{url}
\usepackage{braket}
\usepackage[dvipdfmx]{hyperref}
\usepackage[dvipdfmx]{graphicx,color}

\begin{document}
\section{問い}
\[
\left\{
\begin{array}{1}
  \bra{\phi_n} = \cos\theta \bra{-, n+1} - \sin\theta \bra{+, n}\\
  \bra{\psi_n} = \sin\theta \bra{-, n+1} + \cos\theta \bra{+, n}
  \end{array}
\right.
\]
のとき、以下の式が成り立つことを示す。
\[
\sum{n} (\ket{\phi_n} \bra{\phi_n} +\ket{\psi_n} \bra{\psi_n}) + \ket{-, 0} \bra{-, 0} = 1
\]

\section{解}
シグマの和の中身を計算すると、
\[
\ket{\phi_n} \bra{\phi_n} +\ket{\psi_n} \bra{\psi_n} \\
= (\cos\theta \ket{-, n+1} - \sin\theta \ket{{+,n})(\cos\theta \bra{-, n+1} - \sin\theta \bra{{+,n}) + (\sin\theta \ket{-, n+1} + \cos\theta \ket{{+,n})(\sin\theta \bra{-, n+1} + \cos\theta \bra{{+,n}) \\
= (\cos^2\theta + \sin^2\theta) \ket{-, n+1} \bra{-, n+1} + (\cos\theta\sin\theta-\cos\theta\sin\theta)(\ket{-, n+1}\bra{+, n} + \ket{+, n} \bra{-, n+1}) \\
= \ket{-, n+1} \bra{-, n+1} + \ket{+, n} \brbra{{+, n}
\]
これの和をとると、
\[
\sum_{n} (\ket{-, n+1} \bra{-, n+1} + \ket{+, n} \brbra{{+, n}) = \sum_{n} \ket{-, n+1} \bra{-, n+1} + \sum_{n} \ket{+, n} \bra{+, n}
\]
第2項はbraketの中身がn=0からの和になっているが、第1項ではbraketの中身がn=1からの和になっている。揃えるために$\ket{-, 0} \bra{-, 0}$を加えると、
\[
\sum{n} (\ket{\phi_n} \bra{\phi_n} +\ket{\psi_n} \bra{\psi_n}) + \ket{-, 0} \bra{-, 0} 
\]
ここで、
\[
\sum_{n} \ket{-} \bra{-} + \ket{+} \bra{+} = 1
\]
なので、
\[
\sum{n} (\ket{\phi_n} \bra{\phi_n} +\ket{\psi_n} \bra{\psi_n}) + \ket{-, 0} \bra{-, 0} = 1
\]
となる。

\end{document}
